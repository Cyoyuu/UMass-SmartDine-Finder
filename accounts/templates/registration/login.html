{% extends "base.html" %}
{% block content %}
  <h1>Welcome back</h1>
  {% if form.non_field_errors %}
    <ul class="errorlist">
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  <form method="post">
    {% csrf_token %}
    <div class="field">
      <label for="id_username">Username</label>
      {{ form.username }}
      {% if form.username.errors %}
        {{ form.username.errors }}
      {% endif %}
    </div>
    <div class="field">
      <label for="id_password">Password</label>
      <div class="password-wrapper">
        {{ form.password }}
        <button type="button" class="password-toggle" onclick="togglePassword('id_password')">Show</button>
      </div>
      {% if form.password.errors %}
        {{ form.password.errors }}
      {% endif %}
    </div>
    <button class="btn" type="submit">Login</button>
  </form>
  <div class="links">
    New here? <a href="/register/">Create an account</a>
  </div>

  <script>
    // toggle password visibility
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const toggleBtn = field.nextElementSibling;
      
      if (field.type === 'password') {
        field.type = 'text';
        toggleBtn.textContent = 'Hide';
      } else {
        field.type = 'password';
        toggleBtn.textContent = 'Show';
      }
    }
  </script>
{% endblock %}
